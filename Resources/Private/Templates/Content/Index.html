<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"
      xmlns:f="http://typo3.org/ns/fluid/ViewHelpers"
      xmlns:vf="http://typo3.org/ns/Fab/VidiFrontend/ViewHelpers">

<f:layout name="Default"/>

<f:section name="main">

	<f:if condition="{settings.isVisualSearchBar}">
		<style>
			.dataTables_filter {
				visibility: hidden;
			}
		</style>
	</f:if>

	<vf:loadAssets/>

	<script>

		window.VidiFrontend = !window.VidiFrontend ? {} : window.VidiFrontend;

		// Initialize VidiFrontend if necessary.
		if (!VidiFrontend.settings) {
			VidiFrontend.parameterPrefix = 'tx_vidifrontend_pi1';
			VidiFrontend.settings = {};
			VidiFrontend.bars = {};
			VidiFrontend.grids = {};
			VidiFrontend.dataTable = {};
			VidiFrontend.dataTable['dom'] = "{vf:visualSearch.configuration()}";
		}

		// Columns configuration
		var columns = [];
		{vf:grid.column.configuration()}

		// Labels
		var labels = {};
		{vf:grid.column.localization()}

		var gridIdentifier =  parseInt('{gridIdentifier}');
		VidiFrontend.settings[gridIdentifier] = {};
		VidiFrontend.settings[gridIdentifier]['id'] = gridIdentifier;
		VidiFrontend.settings[gridIdentifier]['dataType'] = "{dataType}";
		VidiFrontend.settings[gridIdentifier]['columns'] = columns;
		VidiFrontend.settings[gridIdentifier]['language'] = labels;
		VidiFrontend.settings[gridIdentifier]['facets'] = {vf:grid.facets()};
		VidiFrontend.settings[gridIdentifier]['lengthMenu'] = {vf:grid.lengthMenu()};
		VidiFrontend.settings[gridIdentifier]['suggestions'] = {vf:grid.suggestions()};
		VidiFrontend.settings[gridIdentifier]['hasDetailView'] = {f:if(condition: "{settings.templateDetail}", then: 'true', else: 'false')};
	</script>

	<f:comment><!--Conditional style whether there is a detail view --></f:comment>
	<f:if condition="{settings.templateDetail}">
		<style>
			#grid-{gridIdentifier} tbody tr td {
				cursor: pointer;
			}
		</style>
	</f:if>

	<table id="grid-{gridIdentifier}" class="{settings.grid.className}" cellspacing="0" width="100%">
		<thead>
		<tr class="t3-row-header">
			<f:for each="{columns}" key="columnName" as="configuration">
				<th>
					<f:if condition="{vf:grid.column.header(name: '{columnName}')}">
						<f:then>
							<f:format.raw>{vf:grid.column.header(name: '{columnName}')}</f:format.raw>
						</f:then>
						<f:else>
							<vf:grid.column.title/>
						</f:else>
					</f:if>
				</th>
			</f:for>
		</tr>
		</thead>
		<tbody></tbody>
	</table>

</f:section>
</html>
