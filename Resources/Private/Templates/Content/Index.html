<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"
      xmlns:f="http://typo3.org/ns/fluid/ViewHelpers"
      xmlns:vf="http://typo3.org/ns/Fab/VidiFrontend/ViewHelpers">

<f:layout name="Default"/>

<f:section name="main">

	<f:if condition="{settings.isVisualSearchBar}">
		<style>
			.dataTables_filter {
				visibility: hidden;
			}
		</style>
	</f:if>

	<f:if condition="{settings.loadJsFile}">
		<vf:script file="{f:uri.resource(path:'Build/JavaScript/{settings.loadJsFile}')}" />
	</f:if>
	<f:if condition="{settings.loadCssFile}">
		<vf:style file="{f:uri.resource(path:'Build/StyleSheets/{settings.loadCssFile}')}" />
	</f:if>

	<script>
		var dataType = "{dataType}";
		var gridIdentifier = '{gridIdentifier}' - 0;
		var dataTableDom = "{vf:visualSearch.configuration()}";

		// Columns configuration
		var columns = [];
		{vf:grid.column.configuration()}

		// Labels
		var labels = {};
		{vf:grid.column.localization()}

		// Facets
		var facets = {vf:grid.facets()};

		// Facet suggestions
		var suggestions = {vf:grid.suggestions()};

		<![CDATA[

		window.VidiFrontend = !window.VidiFrontend ? {} : window.VidiFrontend;

		// Initialize VidiFrontend if necessary.
		if (!VidiFrontend.settings) {
			VidiFrontend.parameterPrefix = 'tx_vidifrontend_pi1';
			VidiFrontend.settings = {};
			VidiFrontend.bars = {};
			VidiFrontend.grids = {};
			VidiFrontend.dataTable = {
				dom: dataTableDom
			};
		}

		VidiFrontend.settings[gridIdentifier] = {
			id: gridIdentifier,
			dataType: dataType,
			columns: columns,
			language: labels,
			facets: facets,
			suggestions: suggestions
		};

		]]>
	</script>

	<table id="grid-{gridIdentifier}" class="{settings.grid.className}" cellspacing="0" width="100%">
		<thead>
		<tr class="t3-row-header">
			<f:for each="{columns}" key="columnName" as="configuration">
				<th>
					<f:if condition="{vf:grid.column.header(name: '{columnName}')}">
						<f:then>
							<f:format.raw>{vf:grid.column.header(name: '{columnName}')}</f:format.raw>
						</f:then>
						<f:else>
							<vf:grid.column.title/>
						</f:else>
					</f:if>
				</th>
			</f:for>
		</tr>
		</thead>
		<tbody></tbody>
	</table>

</f:section>
</html>
